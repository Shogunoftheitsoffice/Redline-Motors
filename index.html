<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redline Motors - JDM Parts Worldwide</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Stripe.js - Required for payment processing -->
    <script src="https://js.stripe.com/v3/"></script>

    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark background */
            color: #F9FAFB;
        }
        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://placehold.co/1920x1080/000000/FFFFFF?text=JDM+Engine');
            background-size: cover;
            background-position: center;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .cart-item-count {
            position: absolute;
            top: -8px;
            right: -12px;
            height: 22px;
            width: 22px;
            line-height: 22px;
        }
        .cart-panel {
            transition: transform 0.3s ease-in-out;
        }
        .translate-x-full {
            transform: translateX(100%);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <a href="#" class="flex items-center space-x-2">
                    <i class="fa-solid fa-cogs text-red-500 text-3xl"></i>
                    <span class="text-2xl font-bold tracking-tighter">Redline Motors</span>
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8 text-sm font-medium text-gray-300">
                    <a href="#products" class="hover:text-red-500 transition-colors">Turbochargers</a>
                    <a href="#products" class="hover:text-red-500 transition-colors">Exhausts</a>
                    <a href="#products" class="hover:text-red-500 transition-colors">Suspension</a>
                    <a href="#about" class="hover:text-red-500 transition-colors">About Us</a>
                </nav>

                <!-- Cart Icon -->
                <div id="cart-icon" class="relative cursor-pointer">
                    <i class="fa-solid fa-shopping-cart text-2xl text-gray-300 hover:text-red-500 transition-colors"></i>
                    <span id="cart-item-count" class="cart-item-count bg-red-600 text-white text-xs font-bold rounded-full text-center hidden">0</span>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero-bg text-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-32 md:py-48 text-center">
                <h1 class="text-4xl md:text-6xl font-black uppercase tracking-wider">Authentic JDM Performance</h1>
                <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-300">Direct from Japan to your garage. Unleash the true potential of your machine.</p>
                <a href="#products" class="mt-8 inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-transform transform hover:scale-105">Shop All Parts</a>
            </div>
        </section>

        <!-- Worldwide Shipping Banner -->
        <div class="bg-gray-800 py-3">
            <p class="text-center text-sm font-medium text-gray-300"><i class="fa-solid fa-globe mr-2"></i> We ship worldwide from Tokyo, Japan! <i class="fa-solid fa-plane-departure ml-2"></i></p>
        </div>

        <!-- Products Section -->
        <section id="products" class="py-20 bg-gray-900">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-12">Featured Parts</h2>
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <!-- Product cards will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl text-center">
                <h2 class="text-3xl font-bold mb-6">Born from Passion</h2>
                <p class="text-gray-400 leading-relaxed">
                    Based in the heart of Tokyo, Redline Motors was founded by a team of enthusiasts dedicated to sourcing and exporting the best performance parts Japan has to offer. We live and breathe JDM culture, and we're committed to helping you build the car of your dreams, no matter where you are in the world.
                </p>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-gray-400 text-sm">
            <p>&copy; 2025 Redline Motors. All Rights Reserved.</p>
            <p class="mt-2">Made with <i class="fa-solid fa-heart text-red-500"></i> in Tokyo, Japan.</p>
        </div>
    </footer>

    <!-- Shopping Cart Panel -->
    <div id="cart-panel" class="cart-panel fixed top-0 right-0 h-full w-full max-w-md bg-gray-800 shadow-2xl z-50 transform translate-x-full">
        <div class="flex flex-col h-full">
            <!-- Cart Header -->
            <div class="flex items-center justify-between p-6 border-b border-gray-700">
                <h3 class="text-xl font-bold">Your Cart</h3>
                <button id="close-cart-btn" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fa-solid fa-times text-2xl"></i>
                </button>
            </div>

            <!-- Cart Items -->
            <div id="cart-items" class="flex-grow p-6 overflow-y-auto">
                <!-- Cart items will be injected here -->
                <p id="empty-cart-message" class="text-gray-400">Your cart is empty.</p>
            </div>

            <!-- Cart Footer -->
            <div class="p-6 border-t border-gray-700">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-medium">Subtotal</span>
                    <span id="cart-subtotal" class="text-xl font-bold">Â¥0</span>
                </div>
                <p class="text-xs text-gray-500 mb-4 text-center">Shipping and taxes calculated at checkout.</p>
                <button id="checkout-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:bg-gray-600 disabled:cursor-not-allowed">
                    <i class="fa-brands fa-stripe-s mr-2"></i> Proceed to Checkout
                </button>
            </div>
        </div>
    </div>
    <div id="cart-overlay" class="fixed inset-0 bg-black/60 z-40 hidden"></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DATA ---
        const products = [
            { id: 'prod_001', name: 'GReddy T88 Turbo Kit', price: 350000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=GReddy+T88' },
            { id: 'prod_002', name: 'HKS Hi-Power Exhaust', price: 95000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=HKS+Exhaust' },
            { id: 'prod_003', name: 'TEIN Flex Z Coilovers', price: 150000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=TEIN+Coilovers' },
            { id: 'prod_004', name: 'Apexi Power FC ECU', price: 120000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=Apexi+ECU' },
            { id: 'prod_005', name: 'Brembo GT Brake Kit', price: 450000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=Brembo+Brakes' },
            { id: 'prod_006', name: 'Rays TE37 Wheels (Set)', price: 400000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=Rays+TE37' },
            { id: 'prod_007', name: 'Cusco Strut Brace', price: 25000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=Cusco+Brace' },
            { id: 'prod_008', name: 'Spoon Sports Intake', price: 60000, image: 'https://placehold.co/400x400/1F2937/FFFFFF?text=Spoon+Intake' }
        ];

        let cart = [];

        // --- ELEMENTS ---
        const productGrid = document.getElementById('product-grid');
        const cartIcon = document.getElementById('cart-icon');
        const cartPanel = document.getElementById('cart-panel');
        const cartOverlay = document.getElementById('cart-overlay');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const cartItemCount = document.getElementById('cart-item-count');
        const cartItemsContainer = document.getElementById('cart-items');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const checkoutBtn = document.getElementById('checkout-btn');

        // --- FUNCTIONS ---

        // Initialize Stripe.js (Use a TEST publishable key)
        // IMPORTANT: Replace with your actual public key in a real application.
        const stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx'); // This is a public test key from Stripe docs

        // Render products on the page
        function renderProducts() {
            productGrid.innerHTML = products.map(product => `
                <div class="glass-effect rounded-lg overflow-hidden shadow-lg flex flex-col">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-56 object-cover">
                    <div class="p-6 flex-grow flex flex-col">
                        <h3 class="text-xl font-bold">${product.name}</h3>
                        <p class="mt-2 text-2xl font-semibold text-red-400">Â¥${product.price.toLocaleString()}</p>
                        <div class="flex-grow"></div>
                        <button data-id="${product.id}" class="add-to-cart-btn mt-6 w-full bg-gray-700 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Render cart items in the panel
        function renderCart() {
            // Update cart item count badge
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (totalItems > 0) {
                cartItemCount.textContent = totalItems;
                cartItemCount.classList.remove('hidden');
            } else {
                cartItemCount.classList.add('hidden');
            }
            
            // Render items or show empty message
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '';
                emptyCartMessage.classList.remove('hidden');
                checkoutBtn.disabled = true;
            } else {
                emptyCartMessage.classList.add('hidden');
                checkoutBtn.disabled = false;
                cartItemsContainer.innerHTML = cart.map(item => {
                    const product = products.find(p => p.id === item.id);
                    return `
                        <div class="flex items-center justify-between mb-4 pb-4 border-b border-gray-700">
                            <div class="flex items-center">
                                <img src="${product.image}" alt="${product.name}" class="w-16 h-16 object-cover rounded-md mr-4">
                                <div>
                                    <p class="font-bold">${product.name}</p>
                                    <p class="text-sm text-gray-400">Â¥${product.price.toLocaleString()}</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <button data-id="${item.id}" class="quantity-change-btn text-lg px-2">-</button>
                                <span class="mx-2">${item.quantity}</span>
                                <button data-id="${item.id}" class="quantity-change-btn text-lg px-2">+</button>
                                <button data-id="${item.id}" class="remove-from-cart-btn ml-4 text-gray-500 hover:text-red-500"><i class="fa-solid fa-trash"></i></button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Update subtotal
            const subtotal = cart.reduce((sum, item) => {
                const product = products.find(p => p.id === item.id);
                return sum + (product.price * item.quantity);
            }, 0);
            cartSubtotal.textContent = `Â¥${subtotal.toLocaleString()}`;
        }
        
        // --- EVENT HANDLERS ---
        function handleAddToCart(productId) {
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ id: productId, quantity: 1 });
            }
            renderCart();
        }
        
        function handleRemoveFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            renderCart();
        }
        
        function handleQuantityChange(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    handleRemoveFromCart(productId);
                } else {
                    renderCart();
                }
            }
        }

        function openCart() {
            cartPanel.classList.remove('translate-x-full');
            cartOverlay.classList.remove('hidden');
        }

        function closeCart() {
            cartPanel.classList.add('translate-x-full');
            cartOverlay.classList.add('hidden');
        }
        
        // In a real application, you would create a server-side endpoint
        // to create a Checkout Session. For this demo, we'll just log to console.
        function handleCheckout() {
            console.log("Starting checkout...");
            console.log("Cart items:", cart);
            
            // 1. You would send `cart` data to your server.
            // 2. Your server would create a Stripe Checkout session with line items.
            // 3. Your server returns a session ID.
            // 4. You redirect to Stripe's hosted checkout page.
            
            alert('Redirecting to Stripe for secure payment.\n(This is a simulation. No real payment will be processed.)');
            
            /*
            // Example of real Stripe redirect:
            const lineItems = cart.map(item => {
                const product = products.find(p => p.id === item.id);
                return {
                    price_data: {
                        currency: 'jpy',
                        product_data: {
                            name: product.name,
                        },
                        unit_amount: product.price,
                    },
                    quantity: item.quantity
                };
            });
            // This would be done on your server!
            // fetch('/create-checkout-session', { method: 'POST', body: JSON.stringify({ items: lineItems }) })
            //   .then(res => res.json())
            //   .then(session => stripe.redirectToCheckout({ sessionId: session.id }))
            //   .catch(error => console.error('Error:', error));
            */
        }
        
        // --- EVENT LISTENERS ---
        productGrid.addEventListener('click', e => {
            if (e.target.classList.contains('add-to-cart-btn')) {
                const productId = e.target.dataset.id;
                handleAddToCart(productId);
                openCart();
            }
        });
        
        cartItemsContainer.addEventListener('click', e => {
            const button = e.target.closest('button');
            if (!button) return;

            const productId = button.dataset.id;

            if (button.classList.contains('remove-from-cart-btn')) {
                handleRemoveFromCart(productId);
            }
            if (button.classList.contains('quantity-change-btn')) {
                const change = button.textContent === '+' ? 1 : -1;
                handleQuantityChange(productId, change);
            }
        });

        cartIcon.addEventListener('click', openCart);
        closeCartBtn.addEventListener('click', closeCart);
        cartOverlay.addEventListener('click', closeCart);
        checkoutBtn.addEventListener('click', handleCheckout);

        // --- INITIALIZATION ---
        renderProducts();
        renderCart();

    });
    </script>
</body>
</html>
